<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Non‑Hypercubic Dimension</title>
  <!--
    Files expected in the same folder/repo:
      index.html (this file)
      LQVN4U.mp3
      5CPCZLQ.mp3
  -->
  <style>
    /* Minimal, Loos‑ish: neutral palette, clear structure, no ornament. */
    :root{ --paper:#f6f6f4; --ink:#111; --line:#d6d6d2; --muted:#666; }
    @media (prefers-color-scheme: dark){ :root{ --paper:#0f0f0f; --ink:#e8e8e6; --line:#2a2a2a; --muted:#9a9a96; } }
    html,body{height:100%;margin:0;background:var(--paper);color:var(--ink);
      font:16px/1.45 ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;}
    .wrap{max-width:880px;margin:0 auto;padding:48px 24px 56px;}
    header{display:flex;justify-content:space-between;align-items:flex-end;gap:24px;margin-bottom:28px;border-bottom:1px solid var(--line);padding-bottom:14px}
    h1{font-size:20px;font-weight:600;margin:0}
    .subtitle{font-size:13px;color:var(--muted);margin:0}

    .player{display:grid;gap:18px}
    .row{display:flex;gap:12px;align-items:center;}

    .btn{appearance:none;border:1px solid var(--ink);background:transparent;color:var(--ink);
      padding:8px 10px;font-size:14px;border-radius:6px;cursor:pointer}
    .btn[aria-pressed="true"]{background:var(--ink);color:var(--paper)}
    .btn:focus{outline:2px solid var(--ink);outline-offset:2px}
    .list{display:flex;flex-wrap:wrap;gap:8px}

    .controls{display:flex;flex-wrap:wrap;gap:8px}
    .toggle{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);padding:8px 10px;border-radius:6px}
    .toggle input{accent-color:currentColor}

    audio{width:100%;filter:none}

    .meta{display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--line);padding-top:12px;margin-top:4px}
    .title{font-size:15px}
    .time{font-variant-numeric:tabular-nums;color:var(--muted);font-size:13px}
    footer{margin-top:36px;border-top:1px solid var(--line);padding-top:12px;font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>¬(Hypercubic(d))</h1>
        <p class="subtitle">alter.shell</p>
      </div>
      <div class="subtitle">2025</div>
    </header>

    <section class="player" aria-label="audio player">
      <div class="row">
        <div class="list" role="tablist" aria-label="tracks">
          <button id="t1" role="tab" class="btn" aria-selected="true" aria-pressed="true">side one</button>
          <button id="t2" role="tab" class="btn" aria-selected="false" aria-pressed="false">side two</button>
        </div>
      </div>

      <audio id="audio" preload="metadata" controls></audio>

      <div class="controls" aria-label="playback options">
        <label class="toggle"><input type="checkbox" id="continuous" checked> continuous</label>
        <label class="toggle"><input type="checkbox" id="repeatAll"> repeat all</label>
        <button id="playBoth" class="btn" aria-label="play both tracks">play both</button>
      </div>

      <div class="meta">
        <div class="title" id="trackTitle">non‑hypercubic universe — side one</div>
        <div class="time"><span id="cur">0:00</span> / <span id="dur">0:00</span></div>
      </div>
    </section>

    <footer>
      Keyboard: <kbd>Space</kbd> play/pause · <kbd>←/→</kbd> seek 5s · <kbd>↑/↓</kbd> volume · <kbd>N</kbd>/<kbd>P</kbd> next/prev
    </footer>
  </div>

  <script>
  (function(){
    const TRACKS = [
      { id:'t1', title:'[LQVN4U]', src:'LQVN4U.mp3' },
      { id:'t2', title:'[5CPCZLQ]', src:'5CPCZLQ.mp3' }
    ];

    const audio = document.getElementById('audio');
    const t1 = document.getElementById('t1');
    const t2 = document.getElementById('t2');
    const title = document.getElementById('trackTitle');
    const cur = document.getElementById('cur');
    const dur = document.getElementById('dur');
    const continuous = document.getElementById('continuous');
    const repeatAll = document.getElementById('repeatAll');
    const playBoth = document.getElementById('playBoth');

    let current = 0;

    function setTrack(i, opts={}){
      const { autoplay=false, fromUser=false } = opts;
      current = i;
      audio.src = TRACKS[i].src;
      title.textContent = TRACKS[i].title;
      document.title = TRACKS[i].title + ' — webplayer';
      t1.setAttribute('aria-selected', String(i===0));
      t2.setAttribute('aria-selected', String(i===1));
      t1.setAttribute('aria-pressed', String(i===0));
      t2.setAttribute('aria-pressed', String(i===1));
      if('mediaSession' in navigator){
        navigator.mediaSession.metadata = new MediaMetadata({ title: TRACKS[i].title, artist: 'alter.shell', album: 'Non‑Hypercubic Universe', artwork: [] });
      }
      if(autoplay){ audio.play().catch(()=>{}); }
    }

    function nextIndex(){ return Math.min(TRACKS.length-1, current+1); }
    function prevIndex(){ return Math.max(0, current-1); }

    // click handlers — still selectable individually
    t1.addEventListener('click', ()=> setTrack(0, {autoplay:true, fromUser:true}));
    t2.addEventListener('click', ()=> setTrack(1, {autoplay:true, fromUser:true}));

    // continuous play logic
    audio.addEventListener('ended', ()=>{
      if(continuous.checked){
        if(current < TRACKS.length-1){
          setTrack(current+1, {autoplay:true});
        } else if(repeatAll.checked){
          setTrack(0, {autoplay:true});
        } // else: stop naturally
      }
    });

    // play both convenience
    playBoth.addEventListener('click', ()=>{ continuous.checked = true; setTrack(0, {autoplay:true}); });

    // Media Session actions
    if('mediaSession' in navigator){
      navigator.mediaSession.setActionHandler('previoustrack', ()=>{ setTrack(prevIndex(), {autoplay:true}); });
      navigator.mediaSession.setActionHandler('nexttrack', ()=>{ setTrack((current<TRACKS.length-1)? current+1 : (repeatAll.checked?0:current), {autoplay:true}); });
      navigator.mediaSession.setActionHandler('play', ()=> audio.play());
      navigator.mediaSession.setActionHandler('pause', ()=> audio.pause());
      navigator.mediaSession.setActionHandler('seekbackward', (d)=>{ audio.currentTime = Math.max(0, audio.currentTime - (d.seekOffset||5)); });
      navigator.mediaSession.setActionHandler('seekforward', (d)=>{ audio.currentTime = Math.min(audio.duration||1e9, audio.currentTime + (d.seekOffset||5)); });
    }

    // time display
    function fmt(t){ if(!isFinite(t)) return '0:00'; t = Math.max(0, Math.floor(t)); const m = Math.floor(t/60), s = t%60; return m + ':' + String(s).padStart(2,'0'); }
    audio.addEventListener('loadedmetadata', ()=>{ dur.textContent = fmt(audio.duration); });
    audio.addEventListener('timeupdate', ()=>{ cur.textContent = fmt(audio.currentTime); });

    // keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(['INPUT','TEXTAREA'].includes(e.target.tagName)) return;
      if(e.code==='Space'){ e.preventDefault(); if(audio.paused) audio.play(); else audio.pause(); }
      if(e.key==='ArrowRight'){ audio.currentTime = Math.min(audio.duration||1e9, audio.currentTime + 5); }
      if(e.key==='ArrowLeft'){ audio.currentTime = Math.max(0, audio.currentTime - 5); }
      if(e.key==='ArrowUp'){ audio.volume = Math.min(1, (audio.volume + 0.05)); }
      if(e.key==='ArrowDown'){ audio.volume = Math.max(0, (audio.volume - 0.05)); }
      if(e.key==='n' || e.key==='N'){ setTrack((current<TRACKS.length-1)? current+1 : (repeatAll.checked?0:current), {autoplay:true}); }
      if(e.key==='p' || e.key==='P'){ setTrack(prevIndex(), {autoplay:true}); }
    });

    // init
    setTrack(0);
  })();
  </script>
</body>
</html>
